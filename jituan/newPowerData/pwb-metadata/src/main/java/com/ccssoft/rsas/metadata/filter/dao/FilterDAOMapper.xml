<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ccssoft.rsas.metadata.filter.dao.FilterDAOMapper">
  <resultMap id="BaseResultMap" type="com.ccssoft.rsas.metadata.filter.model.FilterVO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jul 07 15:52:17 CST 2016.
    -->
    <id column="FDUFILTERID" jdbcType="VARCHAR" property="filterID" />
    <result column="FDCFILTERNAME" jdbcType="VARCHAR" property="filterName" />
    <result column="FDCDATATYPE" jdbcType="CHAR" property="dataType" />
    <result column="FDILEFTFILTERTYPE" jdbcType="DECIMAL" property="leftFilterType" />
    <result column="FDCLEFTOWNER" jdbcType="VARCHAR" property="leftOwner" />
    <result column="FDCLEFTOPER" jdbcType="VARCHAR" property="leftOper" />
    <result column="FDULEFTFUNCID" jdbcType="VARCHAR" property="leftFuncID" />
    <result column="FDCLEFTPARAMS" jdbcType="VARCHAR" property="leftParams" />
    <result column="FDCLEFTDESC" jdbcType="VARCHAR" property="leftDesc" />
    <result column="FDCOPERSYMBOL" jdbcType="DECIMAL" property="operSymbol" />
    <result column="FDIRIGHTFILTERTYPE" jdbcType="DECIMAL" property="rightFilterType" />
    <result column="FDCRIGHTOWNER" jdbcType="VARCHAR" property="rightOwner" />
    <result column="FDCRIGHTOPER" jdbcType="VARCHAR" property="rightOper" />
    <result column="FDCRIGHTFUNCID" jdbcType="VARCHAR" property="rightFuncID" />
    <result column="FDCRIGHTPARAMS" jdbcType="VARCHAR" property="rightParams" />
    <result column="FDCRIGHTDESC" jdbcType="VARCHAR" property="rightDesc" />
    <result column="FDCEXPRESSION" jdbcType="VARCHAR" property="expression" />
    <result column="FDCEXPRESSDESC" jdbcType="VARCHAR" property="expressDesc" />
  </resultMap>
  
  <insert id="addFilter" parameterType="com.ccssoft.rsas.metadata.filter.model.FilterVO">
  	insert into TBFILTER (FDUFILTERID, FDCFILTERNAME, FDCDATATYPE,
  	FDILEFTFILTERTYPE, FDCLEFTOWNER, FDCLEFTOPER, FDULEFTFUNCID,
  	FDCLEFTPARAMS, FDCLEFTDESC, FDCOPERSYMBOL, FDIRIGHTFILTERTYPE,
  	FDCRIGHTOWNER, FDCRIGHTOPER, FDCRIGHTFUNCID, FDCRIGHTPARAMS,
  	FDCRIGHTDESC, FDCEXPRESSION, FDCEXPRESSDESC)
  	values (#{filterID,jdbcType=VARCHAR}, #{filterName,jdbcType=VARCHAR}, 
  	#{dataType,jdbcType=CHAR}, #{leftFilterType,jdbcType=DECIMAL}, 
  	#{leftOwner,jdbcType=VARCHAR}, #{leftOper,jdbcType=VARCHAR}, 
  	#{leftFuncID,jdbcType=VARCHAR}, #{leftParams,jdbcType=VARCHAR}, 
  	#{leftDesc,jdbcType=VARCHAR}, #{operSymbol,jdbcType=DECIMAL}, 
  	#{rightFilterType,jdbcType=DECIMAL}, #{rightOwner,jdbcType=VARCHAR}, 
  	#{rightOper,jdbcType=VARCHAR}, #{rightFuncID,jdbcType=VARCHAR}, 
  	#{rightParams,jdbcType=VARCHAR}, #{rightDesc,jdbcType=VARCHAR}, 
  	#{expression,jdbcType=VARCHAR}, #{expressDesc,jdbcType=VARCHAR})
  </insert>
  
  <update id="updateFilter" parameterType="com.ccssoft.rsas.metadata.filter.model.FilterVO">
  	update TBFILTER set FDCFILTERNAME = #{filterName,jdbcType=VARCHAR}, FDCDATATYPE = #{dataType,jdbcType=CHAR},
  	FDILEFTFILTERTYPE = #{leftFilterType,jdbcType=DECIMAL}, FDCLEFTOWNER = #{leftOwner,jdbcType=VARCHAR}, 
  	FDCLEFTOPER = #{leftOper,jdbcType=VARCHAR}, FDULEFTFUNCID = #{leftFuncID,jdbcType=VARCHAR},
  	FDCLEFTPARAMS = #{leftParams,jdbcType=VARCHAR}, FDCLEFTDESC = #{leftDesc,jdbcType=VARCHAR}, 
  	FDCOPERSYMBOL = #{operSymbol,jdbcType=DECIMAL}, FDIRIGHTFILTERTYPE = #{rightFilterType,jdbcType=DECIMAL},
  	FDCRIGHTOWNER = #{rightOwner,jdbcType=VARCHAR}, FDCRIGHTOPER = #{rightOper,jdbcType=VARCHAR}, 
  	FDCRIGHTFUNCID = #{rightFuncID,jdbcType=VARCHAR}, FDCRIGHTPARAMS = #{rightParams,jdbcType=VARCHAR},
  	FDCRIGHTDESC = #{rightDesc,jdbcType=VARCHAR}, FDCEXPRESSION = #{expression,jdbcType=VARCHAR}, 
  	FDCEXPRESSDESC = #{expressDesc,jdbcType=VARCHAR}
  	where FDUFILTERID = #{filterID,jdbcType=VARCHAR}
  </update>
  
  <delete id="delFilter" parameterType="java.lang.String">
  	delete from TBFILTER
  	where FDUFILTERID = #{filterID,jdbcType=VARCHAR}
  </delete>
  
  <delete id="delRelationFilters" parameterType="java.lang.String">
  	delete from TBFILTER
  	where FDUFILTERID in
  	(select FDUFILTERID from TBRELATIONITEM where FDURELATIONID = #{relationID,jdbcType=VARCHAR})
  </delete>
  
  <delete id="delOjbectRelationFilters" parameterType="java.util.Map">
  	delete from TBFILTER
  	where FDUFILTERID in
  	(select FDUFILTERID from TBRELATIONITEM
  	where FDURELATIONID in
  	(select FDURELATIONID from TBRELATION
  	where FDUOWNEROBJID = #{ownerObjID,jdbcType=VARCHAR} and FDCOWNEROBJTYPE = #{ownerObjType,jdbcType=CHAR}))
  </delete>
  
  <select id="getFilter" parameterType="java.lang.String" resultMap="BaseResultMap">
  	select FDUFILTERID, FDCFILTERNAME, FDCDATATYPE,
  	FDILEFTFILTERTYPE, FDCLEFTOWNER, FDCLEFTOPER, FDULEFTFUNCID,
  	FDCLEFTPARAMS, FDCLEFTDESC, FDCOPERSYMBOL, FDIRIGHTFILTERTYPE,
  	FDCRIGHTOWNER, FDCRIGHTOPER, FDCRIGHTFUNCID, FDCRIGHTPARAMS,
  	FDCRIGHTDESC, FDCEXPRESSION, FDCEXPRESSDESC
  	from TBFILTER
  	where FDUFILTERID = #{filterID,jdbcType=VARCHAR}
  </select>
  
  <select id="getFilters" resultMap="BaseResultMap">
  	select FDUFILTERID, FDCFILTERNAME, FDCDATATYPE,
  	FDILEFTFILTERTYPE, FDCLEFTOWNER, FDCLEFTOPER, FDULEFTFUNCID,
  	FDCLEFTPARAMS, FDCLEFTDESC, FDCOPERSYMBOL, FDIRIGHTFILTERTYPE,
  	FDCRIGHTOWNER, FDCRIGHTOPER, FDCRIGHTFUNCID, FDCRIGHTPARAMS,
  	FDCRIGHTDESC, FDCEXPRESSION, FDCEXPRESSDESC
  	from TBFILTER
  </select>
</mapper>